# テスト戦略テンプレート

各機能ドキュメントに含めるべきテスト戦略のテンプレート

## テスト戦略

### 単体テスト (Unit Tests)

#### Core Engine層のテスト
**対象モジュール**: `[module-name]/`

- **[機能A]のテスト**
  - [テストケース1]
  - [テストケース2]
  - [テストケース3]

- **[機能B]のテスト**
  - [テストケース1]
  - [テストケース2]

#### Service層のテスト
**対象Service**: `[ServiceName]`

- **[Service]のテスト**
  - [初期化が正しく行われること]
  - [状態遷移が適切であること]
  - [Core Engineへの委譲が正しいこと]
  - [エラーハンドリングが適切であること]

#### Headless UI層のテスト
**対象Controller**: `[ControllerName]`

- **[Controller]のテスト**
  - 状態更新が正しく行われること
  - イベント通知が適切であること
  - UI状態の整合性が保たれること

### 統合テスト (Integration Tests)

#### [機能名]フロー全体のテスト
- **基本シナリオ**
  - [ステップ1]→[ステップ2]→[ステップ3]の流れが正しいこと
  - [結果]が期待通りであること

- **特殊シナリオ**
  - [特殊ケース1]が正しく処理されること
  - [特殊ケース2]が正しく処理されること

- **エッジケース**
  - [境界値]での動作が正しいこと
  - [異常系]のハンドリングが適切であること

#### Service間の連携テスト
- [Service A] + [Service B] の連携
- [Service B] + [Service C] の連携

### E2Eテスト (End-to-End Tests)

#### 実戦的なシナリオ
- **[シナリオ1]**
  - [要件1]が満たされること
  - [要件2]が満たされること

- **[シナリオ2]**
  - [長時間動作が安定すること]
  - [パフォーマンスが劣化しないこと]
  - [メモリリークがないこと]

### テストカバレッジ目標

| 層 | 目標カバレッジ | 優先度 |
|----|--------------|-------|
| Core Engine層 | 90%以上 | 最高 |
| Service層 | 85%以上 | 高 |
| Headless UI層 | 75%以上 | 中 |

### テストデータ

#### テスト用データの定義
```typescript
// [機能]に必要なテストデータを定義
const testData = {
  // ...
};
```

### テスト実行方法

```bash
# 単体テスト
npm test -- [test-file-name]

# 統合テスト
npm run test:integration -- [test-file-name]

# E2Eテスト
npm run test:e2e -- [test-file-name]

# カバレッジ付き全テスト
npm run test:coverage
```

### 注意事項

- Core Engine層は純粋関数であるため、モックを使わず直接テスト可能
- Service層のテストでは、Core Engineをモック化することで独立してテスト
- Headless UI層のテストでは、Serviceをモック化してUI状態管理に集中
- 統合テストでは、実際のCore EngineとServiceを使用してフロー全体を検証
- E2Eテストでは、実装されたUIコンポーネント（React、Vue等）と統合してテスト

