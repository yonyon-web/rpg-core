# キャラクター成長システム設計

ステータス計算、レベルアップ、スキル習得、ジョブシステムに関する設計。Core Engine、Service、Headless UIの3層で構成。

## 目次

1. [概要](#概要)
2. [Core Engine層](#core-engine層)
3. [関連Service](#関連service)

---

## 概要

### システムの役割

キャラクター成長システムは以下の機能を提供します：

- **ステータス計算**: 基礎値、装備補正、バフ/デバフを含む最終ステータス算出
- **レベルアップ**: 経験値管理とレベルアップ時の能力値成長
- **スキル習得**: スキルの習得条件判定と管理
- **ジョブシステム**: 職業・クラスによるステータス補正と制限

### 3層アーキテクチャ

```
┌─────────────────────────────────────┐
│  Service Layer                      │
│  RewardService                      │  ← 経験値配分
│  SkillLearnService                  │  ← スキル習得管理
│  JobChangeService                   │  ← ジョブ変更管理
└─────────────────────────────────────┘
              ↓ 委譲
┌─────────────────────────────────────┐
│  Core Engine Layer                  │
│  character/ モジュール              │  ← 純粋な計算
│  - ステータス計算                    │
│  - 成長計算                          │
│  - スキル判定                        │
└─────────────────────────────────────┘
```

---

## Core Engine層

### 📊 ステータスとキャラクターに関する計算

#### ステータス補正の計算
- 基礎ステータスの取得
- 装備による補正
- バフ/デバフによる補正
- ジョブ・クラスによる補正
- レベルによる補正
- 最終ステータスの算出

#### レベルと成長に関する計算
- 経験値の計算
  - 戦闘報酬の経験値
  - パーティへの配分
  - 経験値ボーナスの適用
- レベルアップ判定
  - 必要経験値の計算
  - レベルアップ可否の判定
- ステータス成長の計算
  - レベルアップ時の能力値上昇
  - 成長率による変動
  - ジョブ別成長補正

#### スキル習得に関する判定
- 習得条件の判定
  - レベル要件
  - ジョブ要件
  - 前提スキル要件
- スキルデータの管理
  - スキルの効果
  - 使用コスト
  - 対象範囲

#### 職業・クラスに関する計算
- 転職条件の判定
  - レベル要件
  - アイテム要件
  - クエスト完了要件
- ステータス補正の計算
  - ジョブボーナス
  - 装備可能武器・防具の判定
- 装備可否の判定
  - ジョブ制限のチェック



---

## 関連Service

キャラクター成長に関連するServiceについては、以下のドキュメントを参照してください：

- **報酬.md**: RewardService（経験値配分とレベルアップ処理）
- **スキル習得.md**: SkillLearnService（スキル習得管理）
- **ジョブ変更.md**: JobChangeService（職業・クラス変更管理）
