<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ¦é—˜ã‚·ã‚¹ãƒ†ãƒ  - GEasy Kit</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../lib/syntax-highlight.css">
    <script src="../lib/syntax-highlight.js"></script>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="container">
                <div class="nav-content">
                    <a href="../index.html" class="logo">GEasy Kit</a>
                    <ul class="nav-links">
                        <li><a href="../index.html">ãƒ›ãƒ¼ãƒ </a></li>
                        <li><a href="index.html">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
                        <li><a href="../customization/index.html">ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</a></li>
                        <li><a href="https://github.com/yonyon-web/GEasy-Kit" target="_blank" rel="noopener">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section class="docs-section">
            <div class="container">
                <div class="docs-layout">
                    <aside class="docs-sidebar">
                        <h3>æˆ¦é—˜ã‚·ã‚¹ãƒ†ãƒ </h3>
                        <ul>
                            <li><a href="#overview" class="active">æ©Ÿèƒ½ã®æ¦‚è¦</a></li>
                            <li><a href="#headless-ui">Headless UI</a></li>
                            <li><a href="#service">Service</a></li>
                            <li><a href="#core-engine">Core Engine</a></li>
                        </ul>
                        <h4 style="margin-top: 2rem;">é–¢é€£ãƒšãƒ¼ã‚¸</h4>
                        <ul>
                            <li><a href="index.html">â† ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆTOP</a></li>
                            <li><a href="item.html">ã‚¢ã‚¤ãƒ†ãƒ  â†’</a></li>
                        </ul>
                    </aside>

                    <div class="docs-content">
                        <h1 id="overview">æˆ¦é—˜ã‚·ã‚¹ãƒ†ãƒ </h1>
                        
                        <h2>æ©Ÿèƒ½ã®æ¦‚è¦</h2>
                        <p>
                            æˆ¦é—˜ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ã‚¿ãƒ¼ãƒ³åˆ¶ãƒãƒˆãƒ«ã®é€²è¡Œã‚’ç®¡ç†ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚
                            ã‚³ãƒãƒ³ãƒ‰é¸æŠã€è¡Œå‹•å®Ÿè¡Œã€ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ãªã©ã€æˆ¦é—˜ã«å¿…è¦ãªå…¨ã¦ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
                        </p>

                        <div class="card">
                            <h3>ğŸ¯ ä¸»ãªæ©Ÿèƒ½</h3>
                            <ul>
                                <li><strong>ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—</strong>: ç‰©ç†æ”»æ’ƒã€é­”æ³•æ”»æ’ƒã€å›å¾©ãªã©ã®è¨ˆç®—</li>
                                <li><strong>è¡Œå‹•é †ç®¡ç†</strong>: ç´ æ—©ã•ã«åŸºã¥ãè¡Œå‹•é †ã®æ±ºå®š</li>
                                <li><strong>ã‚³ãƒãƒ³ãƒ‰é¸æŠ</strong>: ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æˆ¦é—˜ã‚³ãƒãƒ³ãƒ‰é¸æŠãƒ•ãƒ­ãƒ¼</li>
                                <li><strong>å‹æ•—åˆ¤å®š</strong>: æˆ¦é—˜ã®å‹åˆ©ãƒ»æ•—åŒ—ãƒ»é€ƒèµ°ã®åˆ¤å®š</li>
                            </ul>
                        </div>

                        <h2 id="headless-ui">Headless UI</h2>
                        
                        <h3>åŸºæœ¬çš„ãªä½¿ã„æ–¹</h3>
                        <p>BattleControllerã‚’ä½¿ã£ã¦æˆ¦é—˜ã‚’ç®¡ç†ã™ã‚‹åŸºæœ¬çš„ãªä¾‹ã§ã™ï¼š</p>
                        <pre><code>import { GEasyKit } from 'geasy-kit';

const game = new GEasyKit();
const battleController = game.controllers.battle();

// æˆ¦é—˜ã‚’é–‹å§‹
await battleController.startBattle(playerParty, enemyGroup);

// çŠ¶æ…‹ã‚’è³¼èª­
battleController.subscribe((state) => {
  console.log('ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚º:', state.phase);
  console.log('ã‚¿ãƒ¼ãƒ³æ•°:', state.turnNumber);
  updateUI(state); // UIã‚’æ›´æ–°
});

// ã‚¤ãƒ™ãƒ³ãƒˆã‚’è³¼èª­
battleController.on('action-executed', (data) => {
  console.log('è¡Œå‹•å®Ÿè¡Œ:', data.action, data.result);
  showActionAnimation(data);
});

// ã‚³ãƒãƒ³ãƒ‰é¸æŠ
await battleController.selectCommand(playerId, {
  type: 'attack',
  targetId: enemyId
});

// ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿè¡Œ
await battleController.executeTurn();</code></pre>

                        <h3>ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§</h3>
                        <p><code>on()</code>ãƒ¡ã‚½ãƒƒãƒ‰ã§è³¼èª­ã§ãã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã§ã™ï¼š</p>
                        <table>
                            <thead>
                                <tr>
                                    <th>ã‚¤ãƒ™ãƒ³ãƒˆå</th>
                                    <th>ãƒ‡ãƒ¼ã‚¿</th>
                                    <th>èª¬æ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>battle-started</td>
                                    <td>{ party, enemies }</td>
                                    <td>æˆ¦é—˜ãŒé–‹å§‹ã•ã‚ŒãŸã¨ã</td>
                                </tr>
                                <tr>
                                    <td>turn-started</td>
                                    <td>{ turnNumber, turnOrder }</td>
                                    <td>ã‚¿ãƒ¼ãƒ³ãŒé–‹å§‹ã•ã‚ŒãŸã¨ã</td>
                                </tr>
                                <tr>
                                    <td>action-executed</td>
                                    <td>{ action, result }</td>
                                    <td>è¡Œå‹•ãŒå®Ÿè¡Œã•ã‚ŒãŸã¨ã</td>
                                </tr>
                                <tr>
                                    <td>battle-ended</td>
                                    <td>{ result, rewards }</td>
                                    <td>æˆ¦é—˜ãŒçµ‚äº†ã—ãŸã¨ã</td>
                                </tr>
                                <tr>
                                    <td>animation-started</td>
                                    <td>{ animation }</td>
                                    <td>ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒé–‹å§‹ã•ã‚ŒãŸã¨ã</td>
                                </tr>
                                <tr>
                                    <td>animation-completed</td>
                                    <td>{ animation }</td>
                                    <td>ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®Œäº†ã—ãŸã¨ã</td>
                                </tr>
                                <tr>
                                    <td>message-added</td>
                                    <td>{ message }</td>
                                    <td>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¿½åŠ ã•ã‚ŒãŸã¨ã</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <h3>æˆ¦é—˜ãƒ•ãƒ­ãƒ¼</h3>
                        <p>BattleControllerã¯ä»¥ä¸‹ã®æµã‚Œã§æˆ¦é—˜ã‚’é€²è¡Œã—ã¾ã™ï¼š</p>
                        <div class="flow-diagram">
                            <div class="flow-step">
                                <div class="flow-node flow-start">æˆ¦é—˜é–‹å§‹<br/><code>startBattle()</code></div>
                                <div class="flow-arrow">â†“</div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-node">ã‚³ãƒãƒ³ãƒ‰å…¥åŠ›å¾…ã¡<br/><code>selectCommand()</code></div>
                                <div class="flow-arrow">â†“</div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-node">ã‚¿ãƒ¼ãƒ³å®Ÿè¡Œ<br/><code>executeTurn()</code></div>
                                <div class="flow-arrow">â†“</div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-node flow-decision">å‹æ•—åˆ¤å®š</div>
                                <div class="flow-branch">
                                    <div class="flow-arrow-branch">
                                        <span class="branch-label">æˆ¦é—˜ç¶™ç¶š</span>
                                        <div class="arrow-back">â†‘</div>
                                    </div>
                                    <div class="flow-arrow-branch">
                                        <span class="branch-label">æˆ¦é—˜çµ‚äº†</span>
                                        <div class="arrow-down">â†“</div>
                                    </div>
                                </div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-node flow-end">çµ‚äº†</div>
                            </div>
                        </div>

                        <h3>ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ã®é–¢æ•°</h3>
                        <p>æˆ¦é—˜ã®æµã‚Œã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã«ä»¥ä¸‹ã®é–¢æ•°ã‚’ä½¿ç”¨ã§ãã¾ã™ï¼š</p>
                        <ul>
                            <li><code>startBattle(party, enemies)</code> - æˆ¦é—˜ã‚’é–‹å§‹</li>
                            <li><code>selectCommand(actorId, command)</code> - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®è¡Œå‹•ã‚’é¸æŠ</li>
                            <li><code>executeTurn()</code> - é¸æŠã•ã‚ŒãŸè¡Œå‹•ã‚’å®Ÿè¡Œ</li>
                            <li><code>endBattle(result)</code> - æˆ¦é—˜ã‚’å¼·åˆ¶çµ‚äº†</li>
                            <li><code>pause()</code> - æˆ¦é—˜ã‚’ä¸€æ™‚åœæ­¢</li>
                            <li><code>resume()</code> - ä¸€æ™‚åœæ­¢ã—ãŸæˆ¦é—˜ã‚’å†é–‹</li>
                        </ul>

                        <h3>ã‚¹ãƒ†ãƒ¼ãƒˆæ§‹é€ </h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th>
                                    <th>å‹</th>
                                    <th>èª¬æ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>phase</td>
                                    <td>string</td>
                                    <td>ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆ'idle' | 'command' | 'execution' | 'ended'ï¼‰</td>
                                </tr>
                                <tr>
                                    <td>turnNumber</td>
                                    <td>number</td>
                                    <td>ç¾åœ¨ã®ã‚¿ãƒ¼ãƒ³æ•°</td>
                                </tr>
                                <tr>
                                    <td>party</td>
                                    <td>Character[]</td>
                                    <td>å‘³æ–¹ãƒ‘ãƒ¼ãƒ†ã‚£ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é…åˆ—</td>
                                </tr>
                                <tr>
                                    <td>enemies</td>
                                    <td>Enemy[]</td>
                                    <td>æ•µã‚°ãƒ«ãƒ¼ãƒ—ã®é…åˆ—</td>
                                </tr>
                                <tr>
                                    <td>turnOrder</td>
                                    <td>Combatant[]</td>
                                    <td>ç¾åœ¨ã®ã‚¿ãƒ¼ãƒ³ã®è¡Œå‹•é †</td>
                                </tr>
                                <tr>
                                    <td>currentActorId</td>
                                    <td>string</td>
                                    <td>ç¾åœ¨è¡Œå‹•ä¸­ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ID</td>
                                </tr>
                                <tr>
                                    <td>selectedCommands</td>
                                    <td>Map&lt;string, Command&gt;</td>
                                    <td>é¸æŠæ¸ˆã¿ã®ã‚³ãƒãƒ³ãƒ‰</td>
                                </tr>
                                <tr>
                                    <td>result</td>
                                    <td>'victory' | 'defeat' | null</td>
                                    <td>æˆ¦é—˜çµæœï¼ˆçµ‚äº†æ™‚ã®ã¿ï¼‰</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>ãƒ¡ã‚½ãƒƒãƒ‰ä¸€è¦§</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>ãƒ¡ã‚½ãƒƒãƒ‰</th>
                                    <th>å¼•æ•°</th>
                                    <th>æˆ»ã‚Šå€¤</th>
                                    <th>èª¬æ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>startBattle</td>
                                    <td>party: Character[], enemies: Enemy[]</td>
                                    <td>Promise&lt;void&gt;</td>
                                    <td>æˆ¦é—˜ã‚’é–‹å§‹ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>selectCommand</td>
                                    <td>actorId: string, command: Command</td>
                                    <td>Promise&lt;void&gt;</td>
                                    <td>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®è¡Œå‹•ã‚’é¸æŠã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>executeTurn</td>
                                    <td>-</td>
                                    <td>Promise&lt;void&gt;</td>
                                    <td>ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>getState</td>
                                    <td>-</td>
                                    <td>BattleState</td>
                                    <td>ç¾åœ¨ã®æˆ¦é—˜çŠ¶æ…‹ã‚’å–å¾—ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>subscribe</td>
                                    <td>listener: (state: BattleState) =&gt; void</td>
                                    <td>() =&gt; void</td>
                                    <td>çŠ¶æ…‹å¤‰æ›´ã‚’è³¼èª­ã™ã‚‹ï¼ˆè§£é™¤é–¢æ•°ã‚’è¿”ã™ï¼‰</td>
                                </tr>
                                <tr>
                                    <td>on</td>
                                    <td>event: string, handler: (data: any) =&gt; void</td>
                                    <td>() =&gt; void</td>
                                    <td>ã‚¤ãƒ™ãƒ³ãƒˆã‚’è³¼èª­ã™ã‚‹ï¼ˆè§£é™¤é–¢æ•°ã‚’è¿”ã™ï¼‰</td>
                                </tr>
                            </tbody>
                        </table>

                        <h2 id="service">Service</h2>
                        
                        <h3>åŸºæœ¬çš„ãªä½¿ã„æ–¹</h3>
                        <p>BattleServiceã¯æˆ¦é—˜ã®é€²è¡Œãƒ•ãƒ­ãƒ¼ã‚’ç®¡ç†ã—ã¾ã™ï¼š</p>
                        <pre><code>const battleService = game.services.battle;

// æˆ¦é—˜ã‚’é–‹å§‹
await battleService.startBattle(playerParty, enemyGroup);

// ç¾åœ¨ã®çŠ¶æ…‹ã‚’å–å¾—
const state = battleService.getState();
console.log('ç¾åœ¨ã®ã‚¿ãƒ¼ãƒ³:', state.turnNumber);

// ã‚³ãƒãƒ³ãƒ‰ã‚’é¸æŠ
await battleService.selectCommand(playerId, {
  type: 'attack',
  targetId: enemyId
});

// ã‚¿ãƒ¼ãƒ³ã‚’é€²ã‚ã‚‹
await battleService.processTurn();</code></pre>

                        <h3>ãƒ¡ã‚½ãƒƒãƒ‰ä¸€è¦§</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>ãƒ¡ã‚½ãƒƒãƒ‰</th>
                                    <th>å¼•æ•°</th>
                                    <th>æˆ»ã‚Šå€¤</th>
                                    <th>èª¬æ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>startBattle</td>
                                    <td>party: Character[], enemies: Enemy[]</td>
                                    <td>Promise&lt;void&gt;</td>
                                    <td>æˆ¦é—˜ã‚’é–‹å§‹ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>processTurn</td>
                                    <td>-</td>
                                    <td>Promise&lt;void&gt;</td>
                                    <td>ã‚¿ãƒ¼ãƒ³ã‚’å‡¦ç†ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>endBattle</td>
                                    <td>result: 'victory' | 'defeat'</td>
                                    <td>Promise&lt;void&gt;</td>
                                    <td>æˆ¦é—˜ã‚’çµ‚äº†ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>getState</td>
                                    <td>-</td>
                                    <td>BattleState</td>
                                    <td>ç¾åœ¨ã®æˆ¦é—˜çŠ¶æ…‹ã‚’å–å¾—ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>selectCommand</td>
                                    <td>actorId: string, command: Command</td>
                                    <td>Promise&lt;void&gt;</td>
                                    <td>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ã‚³ãƒãƒ³ãƒ‰ã‚’é¸æŠã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>emit</td>
                                    <td>event: string, data: any</td>
                                    <td>void</td>
                                    <td>ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œã™ã‚‹</td>
                                </tr>
                            </tbody>
                        </table>

                        <h2 id="core-engine">Core Engine</h2>
                        
                        <h3>åŸºæœ¬çš„ãªä½¿ã„æ–¹</h3>
                        <p>Core Engineã¯ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ãªã©ã®ç´”ç²‹ãªè¨ˆç®—ã‚’è¡Œã„ã¾ã™ï¼š</p>
                        <pre><code>const engine = game.engine;

// ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—
const damage = engine.calculateDamage(attacker, target, skill);
console.log('ãƒ€ãƒ¡ãƒ¼ã‚¸:', damage.value);
console.log('ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«:', damage.isCritical);

// è¡Œå‹•é †è¨ˆç®—
const turnOrder = engine.calculateTurnOrder(combatants);

// å‘½ä¸­åˆ¤å®š
const hit = engine.checkHit(attacker, target, skill);</code></pre>

                        <h3>ãƒ¡ã‚½ãƒƒãƒ‰ä¸€è¦§</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>ãƒ¡ã‚½ãƒƒãƒ‰</th>
                                    <th>å¼•æ•°</th>
                                    <th>æˆ»ã‚Šå€¤</th>
                                    <th>èª¬æ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>calculateDamage</td>
                                    <td>attacker: Combatant, target: Combatant, skill: Skill</td>
                                    <td>DamageResult</td>
                                    <td>ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’è¨ˆç®—ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>checkHit</td>
                                    <td>attacker: Combatant, target: Combatant</td>
                                    <td>boolean</td>
                                    <td>å‘½ä¸­åˆ¤å®šã‚’è¡Œã†</td>
                                </tr>
                                <tr>
                                    <td>checkCritical</td>
                                    <td>attacker: Combatant</td>
                                    <td>boolean</td>
                                    <td>ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«åˆ¤å®šã‚’è¡Œã†</td>
                                </tr>
                                <tr>
                                    <td>calculateTurnOrder</td>
                                    <td>combatants: Combatant[]</td>
                                    <td>Combatant[]</td>
                                    <td>è¡Œå‹•é †ã‚’è¨ˆç®—ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>checkBattleEnd</td>
                                    <td>state: BattleState</td>
                                    <td>BattleEndResult</td>
                                    <td>æˆ¦é—˜çµ‚äº†æ¡ä»¶ã‚’åˆ¤å®šã™ã‚‹</td>
                                </tr>
                            </tbody>
                        </table>

                        <h2>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h2>
                        <div class="card">
                            <ul>
                                <li><a href="item.html">ã‚¢ã‚¤ãƒ†ãƒ </a> - ã‚¢ã‚¤ãƒ†ãƒ ä½¿ç”¨ã¨ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªç®¡ç†</li>
                                <li><a href="character-growth.html">ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æˆé•·</a> - çµŒé¨“å€¤ã¨ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—</li>
                                <li><a href="../customization/index.html">ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚¬ã‚¤ãƒ‰</a> - æˆ¦é—˜ã‚·ã‚¹ãƒ†ãƒ ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºä¾‹</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 GEasy Kit. Licensed under ISC.</p>
            <p>
                <a href="https://github.com/yonyon-web/GEasy-Kit" target="_blank" rel="noopener">GitHub</a> |
                <a href="https://github.com/yonyon-web/GEasy-Kit/issues" target="_blank" rel="noopener">Issues</a> |
                <a href="index.html">Docs</a>
            </p>
        </div>
    </footer>

    <script>
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    document.querySelectorAll('.docs-sidebar a').forEach(a => a.classList.remove('active'));
                    this.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
