<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çŠ¶æ…‹ç•°å¸¸ - GEasy Kit</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../lib/syntax-highlight.css">
    <script src="../lib/syntax-highlight.js"></script>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="container">
                <div class="nav-content">
                    <a href="../index.html" class="logo">GEasy Kit</a>
                    <ul class="nav-links">
                        <li><a href="../index.html">ãƒ›ãƒ¼ãƒ </a></li>
                        <li><a href="index.html">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
                        <li><a href="../customization/index.html">ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</a></li>
                        <li><a href="https://github.com/yonyon-web/GEasy-Kit" target="_blank" rel="noopener">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section class="docs-section">
            <div class="container">
                <div class="docs-layout">
                    <aside class="docs-sidebar">
                        <h3>çŠ¶æ…‹ç•°å¸¸</h3>
                        <ul>
                            <li><a href="#overview" class="active">æ©Ÿèƒ½ã®æ¦‚è¦</a></li>
                            <li><a href="#headless-ui">Headless UI</a></li>
                            <li><a href="#service">Service</a></li>
                            <li><a href="#core-engine">Core Engine</a></li>
                        </ul>
                        <h4 style="margin-top: 2rem;">é–¢é€£ãƒšãƒ¼ã‚¸</h4>
                        <ul>
                            <li><a href="index.html">â† ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆTOP</a></li>
                            <li><a href="enemy-ai.html">æ•µAI â†’</a></li>
                        </ul>
                    </aside>

                    <div class="docs-content">
                        <h1 id="overview">çŠ¶æ…‹ç•°å¸¸</h1>
                        
                        <h2>æ©Ÿèƒ½ã®æ¦‚è¦</h2>
                        <p>
                            çŠ¶æ…‹ç•°å¸¸ã‚·ã‚¹ãƒ†ãƒ ã¯ã€çŠ¶æ…‹ç•°å¸¸ã®ä»˜ä¸ãƒ»ç®¡ç†ã€ãƒãƒ•ãƒ»ãƒ‡ãƒãƒ•åŠ¹æœã€ç¶™ç¶šãƒ€ãƒ¡ãƒ¼ã‚¸ãªã©ã‚’æä¾›ã—ã¾ã™ã€‚
                            æ¯’ã€éº»ç—ºã€ç¡çœ ãªã©ã®çŠ¶æ…‹ç•°å¸¸ã‚„ã€æ”»æ’ƒåŠ›ä¸Šæ˜‡ãªã©ã®ãƒãƒ•åŠ¹æœã‚’ç®¡ç†ã—ã¾ã™ã€‚
                        </p>

                        <div class="card">
                            <h3>ğŸ¯ ä¸»ãªæ©Ÿèƒ½</h3>
                            <ul>
                                <li><strong>çŠ¶æ…‹ç•°å¸¸ä»˜ä¸</strong>: æ¯’ã€éº»ç—ºã€ç¡çœ ãªã©ã®ä»˜ä¸</li>
                                <li><strong>ãƒãƒ•ãƒ»ãƒ‡ãƒãƒ•</strong>: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¢—æ¸›åŠ¹æœ</li>
                                <li><strong>ç¶™ç¶šåŠ¹æœ</strong>: ã‚¿ãƒ¼ãƒ³çµŒéã«ã‚ˆã‚‹åŠ¹æœ</li>
                                <li><strong>çŠ¶æ…‹ç®¡ç†</strong>: åŠ¹æœã®é‡è¤‡ãƒ»è§£é™¤</li>
                            </ul>
                        </div>

                        <h2 id="headless-ui">Headless UI</h2>
                        
                        <h3>åŸºæœ¬çš„ãªä½¿ã„æ–¹</h3>
                        <p>StatusEffectControllerã‚’ä½¿ã£ã¦çŠ¶æ…‹ç•°å¸¸ã‚’ç®¡ç†ã™ã‚‹åŸºæœ¬çš„ãªä¾‹ã§ã™ï¼š</p>
                        <pre><code>import { GEasyKit } from 'geasy-kit';

const game = new GEasyKit();
const statusEffectController = game.controllers.statusEffect();

// çŠ¶æ…‹ã‚’è³¼èª­
statusEffectController.subscribe((state) => {
  console.log('ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªçŠ¶æ…‹ç•°å¸¸:', state.activeEffects);
  updateStatusDisplay(state);
});

// ã‚¤ãƒ™ãƒ³ãƒˆã‚’è³¼èª­
statusEffectController.on('effect-applied', (data) => {
  console.log('çŠ¶æ…‹ç•°å¸¸ä»˜ä¸:', data.effect);
  showEffectAppliedAnimation(data.target, data.effect);
});

statusEffectController.on('effect-removed', (data) => {
  console.log('çŠ¶æ…‹ç•°å¸¸è§£é™¤:', data.effectId);
  showEffectRemovedAnimation(data.target, data.effectId);
});

// çŠ¶æ…‹ç•°å¸¸ã‚’ä»˜ä¸
await statusEffectController.applyEffect(target, poisonEffect);

// ã‚¿ãƒ¼ãƒ³çµŒéå‡¦ç†
await statusEffectController.tick(target);</code></pre>

                        <h3>ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§</h3>
                        <p><code>on()</code>ãƒ¡ã‚½ãƒƒãƒ‰ã§è³¼èª­ã§ãã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã§ã™ï¼š</p>
                        <table>
                            <thead>
                                <tr>
                                    <th>ã‚¤ãƒ™ãƒ³ãƒˆå</th>
                                    <th>ãƒ‡ãƒ¼ã‚¿</th>
                                    <th>èª¬æ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>effect-applied</td>
                                    <td>{ target, effect }</td>
                                    <td>çŠ¶æ…‹ç•°å¸¸ãŒä»˜ä¸ã•ã‚ŒãŸã¨ã</td>
                                </tr>
                                <tr>
                                    <td>effect-removed</td>
                                    <td>{ target, effectId }</td>
                                    <td>çŠ¶æ…‹ç•°å¸¸ãŒè§£é™¤ã•ã‚ŒãŸã¨ã</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <h3>çŠ¶æ…‹ç•°å¸¸ãƒ•ãƒ­ãƒ¼</h3>
                        <p>StatusEffectControllerã¯ä»¥ä¸‹ã®æµã‚Œã§çŠ¶æ…‹ç•°å¸¸ã‚’ç®¡ç†ã—ã¾ã™ï¼š</p>
                        <div class="flow-diagram">
                            <div class="flow-step">
                                <div class="flow-node flow-start">çŠ¶æ…‹ç•°å¸¸ä»˜ä¸<br/><code>applyStatusEffect()</code></div>
                                <div class="flow-arrow">â†“</div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-node flow-decision">ä»˜ä¸åˆ¤å®š</div>
                                <div class="flow-branch">
                                    <div class="flow-arrow-branch">
                                        <span class="branch-label">æˆåŠŸ</span>
                                        <div class="arrow-down">â†“</div>
                                    </div>
                                    <div class="flow-arrow-branch">
                                        <span class="branch-label">å¤±æ•—</span>
                                        <div class="arrow-down">â†’çµ‚äº†</div>
                                    </div>
                                </div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-node">çŠ¶æ…‹ç•°å¸¸é©ç”¨</div>
                                <div class="flow-arrow">â†“</div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-node">ã‚¿ãƒ¼ãƒ³çµŒéå‡¦ç†<br/><code>tickStatusEffects()</code></div>
                                <div class="flow-arrow">â†“</div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-node">ç¶™ç¶šåŠ¹æœç™ºå‹•</div>
                                <div class="flow-arrow">â†“</div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-node flow-decision">æœŸé™ãƒã‚§ãƒƒã‚¯</div>
                                <div class="flow-branch">
                                    <div class="flow-arrow-branch">
                                        <span class="branch-label">ç¶™ç¶š</span>
                                        <div class="arrow-back">â†‘</div>
                                    </div>
                                    <div class="flow-arrow-branch">
                                        <span class="branch-label">è§£é™¤</span>
                                        <div class="arrow-down">â†“</div>
                                    </div>
                                </div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-node flow-end">çŠ¶æ…‹ç•°å¸¸è§£é™¤</div>
                            </div>
                        </div>

                        <h3>ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ã®é–¢æ•°</h3>
                        <p>çŠ¶æ…‹ç•°å¸¸ã®æµã‚Œã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã«ä»¥ä¸‹ã®é–¢æ•°ã‚’ä½¿ç”¨ã§ãã¾ã™ï¼š</p>
                        <ul>
                            <li><code>applyStatusEffect(targetId, effect)</code> - çŠ¶æ…‹ç•°å¸¸ã‚’ä»˜ä¸</li>
                            <li><code>removeStatusEffect(targetId, effectType)</code> - çŠ¶æ…‹ç•°å¸¸ã‚’è§£é™¤</li>
                            <li><code>tickStatusEffects()</code> - ã‚¿ãƒ¼ãƒ³çµŒéæ™‚ã®å‡¦ç†ã‚’å®Ÿè¡Œ</li>
                            <li><code>getActiveEffects(characterId)</code> - ç¾åœ¨ã®çŠ¶æ…‹ç•°å¸¸ã‚’å–å¾—</li>
                            <li><code>hasStatusEffect(characterId, effectType)</code> - çŠ¶æ…‹ç•°å¸¸ã®æœ‰ç„¡ã‚’åˆ¤å®š</li>
                        </ul>

                        <h3>ã‚¹ãƒ†ãƒ¼ãƒˆæ§‹é€ </h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th>
                                    <th>å‹</th>
                                    <th>èª¬æ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>effects</td>
                                    <td>Map&lt;string, StatusEffect[]&gt;</td>
                                    <td>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼IDã”ã¨ã®çŠ¶æ…‹ç•°å¸¸ãƒªã‚¹ãƒˆ</td>
                                </tr>
                                <tr>
                                    <td>activeCount</td>
                                    <td>number</td>
                                    <td>å…¨ä½“ã®çŠ¶æ…‹ç•°å¸¸æ•°</td>
                                </tr>
                                <tr>
                                    <td>processing</td>
                                    <td>boolean</td>
                                    <td>å‡¦ç†ä¸­ã‹ã©ã†ã‹</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>StatusEffectå‹ã®æ§‹é€ </h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</th>
                                    <th>å‹</th>
                                    <th>èª¬æ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>type</td>
                                    <td>string</td>
                                    <td>çŠ¶æ…‹ç•°å¸¸ã®ç¨®é¡ï¼ˆ'poison' | 'paralysis' | 'sleep'ç­‰ï¼‰</td>
                                </tr>
                                <tr>
                                    <td>duration</td>
                                    <td>number</td>
                                    <td>æ®‹ã‚Šã‚¿ãƒ¼ãƒ³æ•°</td>
                                </tr>
                                <tr>
                                    <td>power</td>
                                    <td>number</td>
                                    <td>åŠ¹æœã®å¼·ã•</td>
                                </tr>
                                <tr>
                                    <td>source</td>
                                    <td>string</td>
                                    <td>ä»˜ä¸å…ƒã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ID</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>ãƒ¡ã‚½ãƒƒãƒ‰ä¸€è¦§</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>ãƒ¡ã‚½ãƒƒãƒ‰</th>
                                    <th>å¼•æ•°</th>
                                    <th>æˆ»ã‚Šå€¤</th>
                                    <th>èª¬æ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>applyStatusEffect</td>
                                    <td>targetId: string, effect: StatusEffect</td>
                                    <td>Promise&lt;void&gt;</td>
                                    <td>çŠ¶æ…‹ç•°å¸¸ã‚’ä»˜ä¸ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>removeStatusEffect</td>
                                    <td>targetId: string, effectType: string</td>
                                    <td>Promise&lt;void&gt;</td>
                                    <td>çŠ¶æ…‹ç•°å¸¸ã‚’è§£é™¤ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>tickStatusEffects</td>
                                    <td>-</td>
                                    <td>Promise&lt;void&gt;</td>
                                    <td>å…¨ã¦ã®çŠ¶æ…‹ç•°å¸¸ã®ã‚¿ãƒ¼ãƒ³çµŒéå‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>getState</td>
                                    <td>-</td>
                                    <td>StatusEffectState</td>
                                    <td>ç¾åœ¨ã®çŠ¶æ…‹ç•°å¸¸ã®çŠ¶æ…‹ã‚’å–å¾—ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>subscribe</td>
                                    <td>listener: (state: StatusEffectState) =&gt; void</td>
                                    <td>() =&gt; void</td>
                                    <td>çŠ¶æ…‹å¤‰æ›´ã‚’è³¼èª­ã™ã‚‹ï¼ˆè§£é™¤é–¢æ•°ã‚’è¿”ã™ï¼‰</td>
                                </tr>
                                <tr>
                                    <td>on</td>
                                    <td>event: string, handler: (data: any) =&gt; void</td>
                                    <td>() =&gt; void</td>
                                    <td>ã‚¤ãƒ™ãƒ³ãƒˆã‚’è³¼èª­ã™ã‚‹ï¼ˆè§£é™¤é–¢æ•°ã‚’è¿”ã™ï¼‰</td>
                                </tr>
                            </tbody>
                        </table>

                        <h2 id="service">Service</h2>
                        
                        <h3>åŸºæœ¬çš„ãªä½¿ã„æ–¹</h3>
                        <p>StatusEffectServiceã¯çŠ¶æ…‹ç•°å¸¸ç®¡ç†ã‚’è¡Œã„ã¾ã™ï¼š</p>
                        <pre><code>const statusService = game.services.statusEffect;

// çŠ¶æ…‹ç•°å¸¸ã‚’ä»˜ä¸
await statusService.applyStatusEffect(targetId, {
  type: 'poison',
  duration: 3,
  power: 10
});

// ç¾åœ¨ã®çŠ¶æ…‹ç•°å¸¸ã‚’å–å¾—
const effects = statusService.getActiveEffects(characterId);

// ã‚¿ãƒ¼ãƒ³çµŒéå‡¦ç†
await statusService.processStatusEffects();

// çŠ¶æ…‹ç•°å¸¸ã‚’è§£é™¤
await statusService.removeStatusEffect(characterId, 'poison');</code></pre>

                        <h3>ãƒ¡ã‚½ãƒƒãƒ‰ä¸€è¦§</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>ãƒ¡ã‚½ãƒƒãƒ‰</th>
                                    <th>å¼•æ•°</th>
                                    <th>æˆ»ã‚Šå€¤</th>
                                    <th>èª¬æ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>applyStatusEffect</td>
                                    <td>targetId: string, effect: StatusEffect</td>
                                    <td>Promise&lt;void&gt;</td>
                                    <td>çŠ¶æ…‹ç•°å¸¸ã‚’ä»˜ä¸ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>removeStatusEffect</td>
                                    <td>targetId: string, effectType: string</td>
                                    <td>Promise&lt;void&gt;</td>
                                    <td>çŠ¶æ…‹ç•°å¸¸ã‚’è§£é™¤ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>getActiveEffects</td>
                                    <td>characterId: string</td>
                                    <td>StatusEffect[]</td>
                                    <td>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ç¾åœ¨ã®çŠ¶æ…‹ç•°å¸¸ã‚’å–å¾—ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>processStatusEffects</td>
                                    <td>-</td>
                                    <td>Promise&lt;void&gt;</td>
                                    <td>å…¨ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®çŠ¶æ…‹ç•°å¸¸ã‚’å‡¦ç†ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>tickEffect</td>
                                    <td>effect: StatusEffect</td>
                                    <td>Promise&lt;void&gt;</td>
                                    <td>å€‹åˆ¥ã®çŠ¶æ…‹ç•°å¸¸ã®ã‚¿ãƒ¼ãƒ³å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>hasStatusEffect</td>
                                    <td>characterId: string, effectType: string</td>
                                    <td>boolean</td>
                                    <td>ç‰¹å®šã®çŠ¶æ…‹ç•°å¸¸ã‚’æŒã£ã¦ã„ã‚‹ã‹åˆ¤å®šã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>emit</td>
                                    <td>event: string, data: any</td>
                                    <td>void</td>
                                    <td>ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œã™ã‚‹</td>
                                </tr>
                            </tbody>
                        </table>

                        <h2 id="core-engine">Core Engine</h2>
                        
                        <h3>åŸºæœ¬çš„ãªä½¿ã„æ–¹</h3>
                        <p>Core Engineã¯çŠ¶æ…‹ç•°å¸¸åŠ¹æœã®è¨ˆç®—ã‚’è¡Œã„ã¾ã™ï¼š</p>
                        <pre><code>const engine = game.engine;

// çŠ¶æ…‹ç•°å¸¸ä»˜ä¸åˆ¤å®š
const applied = engine.checkStatusEffectApplication(skill, target);

// ç¶™ç¶šãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—
const damage = engine.calculateStatusDamage(effect, target);

// çŠ¶æ…‹ç•°å¸¸è€æ€§è¨ˆç®—
const resistance = engine.calculateStatusResistance(target, effectType);</code></pre>

                        <h3>ãƒ¡ã‚½ãƒƒãƒ‰ä¸€è¦§</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>ãƒ¡ã‚½ãƒƒãƒ‰</th>
                                    <th>å¼•æ•°</th>
                                    <th>æˆ»ã‚Šå€¤</th>
                                    <th>èª¬æ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>checkStatusEffectApplication</td>
                                    <td>skill: Skill, target: Character</td>
                                    <td>boolean</td>
                                    <td>çŠ¶æ…‹ç•°å¸¸ãŒä»˜ä¸ã•ã‚Œã‚‹ã‹åˆ¤å®šã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>calculateStatusDamage</td>
                                    <td>effect: StatusEffect, target: Character</td>
                                    <td>number</td>
                                    <td>ç¶™ç¶šãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’è¨ˆç®—ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>calculateStatusResistance</td>
                                    <td>target: Character, effectType: string</td>
                                    <td>number</td>
                                    <td>çŠ¶æ…‹ç•°å¸¸è€æ€§ã‚’è¨ˆç®—ã™ã‚‹</td>
                                </tr>
                                <tr>
                                    <td>calculateStatusEffect</td>
                                    <td>effect: StatusEffect, target: Character</td>
                                    <td>EffectResult</td>
                                    <td>çŠ¶æ…‹ç•°å¸¸ã®åŠ¹æœã‚’è¨ˆç®—ã™ã‚‹</td>
                                </tr>
                            </tbody>
                        </table>

                        <h2>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h2>
                        <div class="card">
                            <ul>
                                <li><a href="battle.html">æˆ¦é—˜ã‚·ã‚¹ãƒ†ãƒ </a> - æˆ¦é—˜ä¸­ã®çŠ¶æ…‹ç•°å¸¸</li>
                                <li><a href="item.html">ã‚¢ã‚¤ãƒ†ãƒ </a> - ã‚¢ã‚¤ãƒ†ãƒ ã«ã‚ˆã‚‹çŠ¶æ…‹å›å¾©</li>
                                <li><a href="../customization/index.html">ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚¬ã‚¤ãƒ‰</a> - çŠ¶æ…‹ç•°å¸¸ã‚·ã‚¹ãƒ†ãƒ ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºä¾‹</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 GEasy Kit. Licensed under ISC.</p>
            <p>
                <a href="https://github.com/yonyon-web/GEasy-Kit" target="_blank" rel="noopener">GitHub</a> |
                <a href="https://github.com/yonyon-web/GEasy-Kit/issues" target="_blank" rel="noopener">Issues</a> |
                <a href="index.html">Docs</a>
            </p>
        </div>
    </footer>

    <script>
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    document.querySelectorAll('.docs-sidebar a').forEach(a => a.classList.remove('active'));
                    this.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
