<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¢ã‚¤ãƒ†ãƒ  - GEasy Kit</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../lib/syntax-highlight.css">
    <script src="../lib/syntax-highlight.js"></script>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="container">
                <div class="nav-content">
                    <a href="../index.html" class="logo">GEasy Kit</a>
                    <ul class="nav-links">
                        <li><a href="../index.html">ãƒ›ãƒ¼ãƒ </a></li>
                        <li><a href="index.html">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
                        <li><a href="../customization/index.html">ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</a></li>
                        <li><a href="https://github.com/yonyon-web/GEasy-Kit" target="_blank" rel="noopener">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section class="docs-section">
            <div class="container">
                <div class="docs-layout">
                    <aside class="docs-sidebar">
                        <h3>ã‚¢ã‚¤ãƒ†ãƒ </h3>
                        <ul>
                            <li><a href="#overview" class="active">æ©Ÿèƒ½ã®æ¦‚è¦</a></li>
                            <li><a href="#headless-ui">Headless UI</a></li>
                            <li><a href="#service">Service</a></li>
                            <li><a href="#core-engine">Core Engine</a></li>
                        </ul>
                        <h4 style="margin-top: 2rem;">é–¢é€£ãƒšãƒ¼ã‚¸</h4>
                        <ul>
                            <li><a href="index.html">â† ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆTOP</a></li>
                            <li><a href="battle.html">æˆ¦é—˜ã‚·ã‚¹ãƒ†ãƒ  â†’</a></li>
                        </ul>
                    </aside>

                    <div class="docs-content">
                        <h1 id="overview">ã‚¢ã‚¤ãƒ†ãƒ </h1>
                        
                        <h2>æ©Ÿèƒ½ã®æ¦‚è¦</h2>
                        <p>
                            ã‚¢ã‚¤ãƒ†ãƒ ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ã‚¢ã‚¤ãƒ†ãƒ ã®ä½¿ç”¨ã€ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªç®¡ç†ã€è£…å‚™ã‚·ã‚¹ãƒ†ãƒ ã‚’æä¾›ã—ã¾ã™ã€‚
                            æˆ¦é—˜ä¸­ã‚„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã®ã‚¢ã‚¤ãƒ†ãƒ ä½¿ç”¨ã€ã‚¢ã‚¤ãƒ†ãƒ ã®å–å¾—ã¨ç®¡ç†ã€è£…å‚™ã®å¤‰æ›´ãªã©ãŒå¯èƒ½ã§ã™ã€‚
                        </p>

                        <div class="card">
                            <h3>ğŸ¯ ä¸»ãªæ©Ÿèƒ½</h3>
                            <ul>
                                <li><strong>ã‚¢ã‚¤ãƒ†ãƒ ä½¿ç”¨</strong>: æˆ¦é—˜ä¸­ãƒ»ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã®ã‚¢ã‚¤ãƒ†ãƒ ä½¿ç”¨ãƒ•ãƒ­ãƒ¼</li>
                                <li><strong>ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªç®¡ç†</strong>: ã‚¢ã‚¤ãƒ†ãƒ ã®è¿½åŠ ãƒ»å‰Šé™¤ãƒ»æ•´ç†</li>
                                <li><strong>è£…å‚™ã‚·ã‚¹ãƒ†ãƒ </strong>: æ­¦å™¨ãƒ»é˜²å…·ã®è£…å‚™å¤‰æ›´</li>
                                <li><strong>ã‚¢ã‚¤ãƒ†ãƒ åŠ¹æœ</strong>: å›å¾©ãƒ»ãƒãƒ•ãƒ»ãƒ‡ãƒãƒ•ãªã©ã®åŠ¹æœè¨ˆç®—</li>
                            </ul>
                        </div>

                        <h2 id="headless-ui">Headless UI</h2>
                        
                        <h3>åŸºæœ¬çš„ãªä½¿ã„æ–¹</h3>
                        <p>ItemControllerã¨InventoryControllerã‚’ä½¿ã£ã¦ã€ã‚¢ã‚¤ãƒ†ãƒ UIã®çŠ¶æ…‹ã‚’ç®¡ç†ã—ã¾ã™ï¼š</p>
                        <pre><code>import { GEasyKit } from 'geasy-kit';

const game = new GEasyKit();
const itemController = game.controllers.item();
const inventoryController = game.controllers.inventory();

// ã‚¢ã‚¤ãƒ†ãƒ ä½¿ç”¨ã®çŠ¶æ…‹ã‚’è³¼èª­
itemController.subscribe((state) => {
  console.log('ã‚¢ã‚¤ãƒ†ãƒ ä½¿ç”¨çŠ¶æ…‹:', state);
  updateItemUI(state);
});

// ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä½¿ç”¨
await itemController.startItemUse('battle');
await itemController.selectItem(itemId);
await itemController.selectTarget(targetId);
await itemController.executeItemUse();</code></pre>

                        <h3>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ–¹æ³•</h3>
                        <p>ã‚¤ãƒ™ãƒ³ãƒˆã‚’è³¼èª­ã—ã¦ã€ã‚«ã‚¹ã‚¿ãƒ å‡¦ç†ã‚’è¿½åŠ ã§ãã¾ã™ï¼š</p>
                        <pre><code>// ã‚¢ã‚¤ãƒ†ãƒ ä½¿ç”¨æ™‚ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
itemController.on('itemUsed', (event) => {
  showItemEffect(event.item, event.target);
});

// ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªå¤‰æ›´æ™‚ã®å‡¦ç†
inventoryController.on('itemAdded', (event) => {
  console.log(\`ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ : \${event.item.name}\`);
});</code></pre>

                        <h3>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</h3>
                        <div class="card">
                            <h4>ItemController</h4>
                            <pre><code>interface ItemController {
  // çŠ¶æ…‹ç®¡ç†
  getState(): ItemUseState;
  subscribe(listener: (state: ItemUseState) => void): () => void;
  
  // ã‚¢ã‚¤ãƒ†ãƒ ä½¿ç”¨
  startItemUse(context: 'battle' | 'field'): Promise<void>;
  selectItem(itemId: string): Promise<void>;
  selectTarget(targetId: string): Promise<void>;
  executeItemUse(): Promise<ItemUseResult>;
  
  // ã‚¤ãƒ™ãƒ³ãƒˆè³¼èª­
  on(event: string, handler: (data: any) => void): () => void;
}</code></pre>
                        </div>

                        <h2 id="service">Service</h2>
                        
                        <h3>åŸºæœ¬çš„ãªä½¿ã„æ–¹</h3>
                        <p>ItemServiceã¨InventoryServiceã¯ã‚¢ã‚¤ãƒ†ãƒ ç®¡ç†ã‚’è¡Œã„ã¾ã™ï¼š</p>
                        <pre><code>const itemService = game.services.item;
const inventoryService = game.services.inventory;

// ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä½¿ç”¨
await itemService.startItemUse('battle');
const usableItems = itemService.getUsableItems();
await itemService.selectItem(itemId);
await itemService.selectTargets([targetId]);
const result = await itemService.useItem();

// ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªç®¡ç†
inventoryService.addItem(itemId, quantity);
inventoryService.removeItem(itemId, quantity);
const items = inventoryService.getItems();</code></pre>

                        <h3>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ–¹æ³•</h3>
                        <p>ItemServiceã‚’æ‹¡å¼µã—ã¦ã€ç‹¬è‡ªã®ã‚¢ã‚¤ãƒ†ãƒ åŠ¹æœã‚’è¿½åŠ ã§ãã¾ã™ï¼š</p>
                        <pre><code>import { ItemService } from 'geasy-kit';

class CustomItemService extends ItemService {
  // ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ãƒ†ãƒ åŠ¹æœ
  async executeItemEffect(item, target) {
    // ç‹¬è‡ªã®åŠ¹æœå‡¦ç†
    if (item.type === 'custom') {
      return this.executeCustomEffect(item, target);
    }
    
    return super.executeItemEffect(item, target);
  }
  
  executeCustomEffect(item, target) {
    // ã‚«ã‚¹ã‚¿ãƒ åŠ¹æœã®å®Ÿè£…
    return {
      effect: 'custom',
      value: item.power * 2
    };
  }
}</code></pre>

                        <h3>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</h3>
                        <div class="card">
                            <h4>ItemService / InventoryService</h4>
                            <pre><code>class ItemService {
  // ã‚¢ã‚¤ãƒ†ãƒ ä½¿ç”¨
  startItemUse(context: 'battle' | 'field'): Promise<void>;
  getUsableItems(): Item[];
  selectItem(itemId: string): Promise<void>;
  selectTargets(targetIds: string[]): Promise<void>;
  useItem(): Promise<ItemUseResult>;
  
  // çŠ¶æ…‹ç®¡ç†
  getState(): ItemUseState;
}

class InventoryService {
  // ã‚¢ã‚¤ãƒ†ãƒ ç®¡ç†
  addItem(itemId: string, quantity: number): void;
  removeItem(itemId: string, quantity: number): boolean;
  getItems(): Item[];
  getItem(itemId: string): Item | undefined;
  hasItem(itemId: string, quantity: number): boolean;
}</code></pre>
                        </div>

                        <h2 id="core-engine">Core Engine</h2>
                        
                        <h3>åŸºæœ¬çš„ãªä½¿ã„æ–¹</h3>
                        <p>Core Engineã¯ã‚¢ã‚¤ãƒ†ãƒ åŠ¹æœã®è¨ˆç®—ã‚’è¡Œã„ã¾ã™ï¼š</p>
                        <pre><code>const engine = game.engine;

// ã‚¢ã‚¤ãƒ†ãƒ åŠ¹æœè¨ˆç®—
const effect = engine.calculateItemEffect(item, user, target);
console.log('åŠ¹æœé‡:', effect.value);
console.log('åŠ¹æœã‚¿ã‚¤ãƒ—:', effect.type);

// ã‚¢ã‚¤ãƒ†ãƒ ä½¿ç”¨å¯å¦åˆ¤å®š
const canUse = engine.checkItemUsable(item, user, context);

// ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå–å¾—
const targets = engine.getItemTargets(item, context);</code></pre>

                        <h3>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ–¹æ³•</h3>
                        <p>ã‚¢ã‚¤ãƒ†ãƒ åŠ¹æœã®è¨ˆç®—å¼ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ï¼š</p>
                        <pre><code>import { ItemEffectCalculator } from 'geasy-kit';

class CustomItemEffectCalculator extends ItemEffectCalculator {
  calculate(item, user, target) {
    // ç‹¬è‡ªã®è¨ˆç®—å¼
    if (item.type === 'heal') {
      const baseHeal = item.power;
      const userBonus = user.healingBonus || 0;
      const finalHeal = baseHeal * (1 + userBonus / 100);
      
      return {
        type: 'heal',
        value: Math.floor(finalHeal)
      };
    }
    
    return super.calculate(item, user, target);
  }
}

const game = new GEasyKit({
  config: {
    itemEffectCalculator: new CustomItemEffectCalculator()
  }
});</code></pre>

                        <h3>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</h3>
                        <div class="card">
                            <h4>Core Engine - ã‚¢ã‚¤ãƒ†ãƒ é–¢é€£</h4>
                            <pre><code>interface ItemCoreEngine {
  // ã‚¢ã‚¤ãƒ†ãƒ åŠ¹æœè¨ˆç®—
  calculateItemEffect(
    item: Item,
    user: Character,
    target: Character
  ): ItemEffect;
  
  // ä½¿ç”¨å¯å¦åˆ¤å®š
  checkItemUsable(
    item: Item,
    user: Character,
    context: 'battle' | 'field'
  ): boolean;
  
  // ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå–å¾—
  getItemTargets(
    item: Item,
    context: BattleContext
  ): Character[];
  
  // ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªè¨ˆç®—
  calculateInventorySpace(items: Item[]): number;
}</code></pre>
                        </div>

                        <h2>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h2>
                        <div class="card">
                            <ul>
                                <li><a href="battle.html">æˆ¦é—˜ã‚·ã‚¹ãƒ†ãƒ </a> - ã‚¢ã‚¤ãƒ†ãƒ ã‚’æˆ¦é—˜ã§ä½¿ç”¨</li>
                                <li><a href="character-growth.html">ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æˆé•·</a> - ã‚¢ã‚¤ãƒ†ãƒ ã«ã‚ˆã‚‹æˆé•·</li>
                                <li><a href="../customization/index.html">ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚¬ã‚¤ãƒ‰</a> - ã‚¢ã‚¤ãƒ†ãƒ ã‚·ã‚¹ãƒ†ãƒ ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºä¾‹</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 GEasy Kit. Licensed under ISC.</p>
            <p>
                <a href="https://github.com/yonyon-web/GEasy-Kit" target="_blank" rel="noopener">GitHub</a> |
                <a href="https://github.com/yonyon-web/GEasy-Kit/issues" target="_blank" rel="noopener">Issues</a> |
                <a href="index.html">Docs</a>
            </p>
        </div>
    </footer>

    <script>
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    document.querySelectorAll('.docs-sidebar a').forEach(a => a.classList.remove('active'));
                    this.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
