<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>キャラクター成長 - GEasy Kit</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../lib/syntax-highlight.css">
    <script src="../lib/syntax-highlight.js"></script>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="container">
                <div class="nav-content">
                    <a href="../index.html" class="logo">GEasy Kit</a>
                    <ul class="nav-links">
                        <li><a href="../index.html">ホーム</a></li>
                        <li><a href="index.html">ドキュメント</a></li>
                        <li><a href="../customization/index.html">カスタマイズ</a></li>
                        <li><a href="https://github.com/yonyon-web/GEasy-Kit" target="_blank" rel="noopener">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section class="docs-section">
            <div class="container">
                <div class="docs-layout">
                    <aside class="docs-sidebar">
                        <h3>キャラクター成長</h3>
                        <ul>
                            <li><a href="#overview" class="active">機能の概要</a></li>
                            <li><a href="#controllers">コントローラー一覧</a></li>
                        </ul>
                        <h4 style="margin-top: 2rem;">関連ページ</h4>
                        <ul>
                            <li><a href="index.html">← ドキュメントTOP</a></li>
                            <li><a href="party.html">パーティ編成 →</a></li>
                        </ul>
                    </aside>

                    <div class="docs-content">
                        <h1 id="overview">キャラクター成長</h1>
                        
                        <h2>機能の概要</h2>
                        <p>
                            キャラクター成長システムは、経験値の獲得、レベルアップ、ステータス上昇、
                            スキル習得、ジョブ変更などのキャラクターの成長を管理します。
                        </p>

                        <div class="card">
                            <h3>🎯 主な機能</h3>
                            <ul>
                                <li><strong>経験値獲得</strong>: 戦闘やイベントからの経験値取得</li>
                                <li><strong>レベルアップ</strong>: レベル上昇とステータス成長</li>
                                <li><strong>スキル習得</strong>: レベルアップ時のスキル習得</li>
                                <li><strong>ジョブ変更</strong>: キャラクターの職業変更</li>
                                <li><strong>ステータス計算</strong>: 成長率に基づくステータス上昇</li>
                            </ul>
                        </div>

                        <h2 id="controllers">コントローラー一覧</h2>
                        <p>キャラクター成長システムは以下のコントローラーで構成されています。各コントローラーの詳細は個別ページをご覧ください。</p>

                        <div class="feature-list" style="margin-top: 2rem;">
                            <div class="feature-list-item">
                                <div class="feature-list-icon">✨</div>
                                <div class="feature-list-content">
                                    <h3><a href="skill-learn-controller.html">SkillLearnController</a></h3>
                                    <p>キャラクターのスキル習得を管理します。レベルアップ時の新規スキル習得、スキルレベルアップ、スキル忘却などの機能を提供します。</p>
                                </div>
                                <a href="skill-learn-controller.html" class="feature-list-link">→</a>
                            </div>

                            <div class="feature-list-item">
                                <div class="feature-list-icon">👤</div>
                                <div class="feature-list-content">
                                    <h3><a href="job-change-controller.html">JobChangeController</a></h3>
                                    <p>キャラクターのジョブ（職業）変更を管理します。ジョブ選択、ステータスプレビュー、ジョブチェンジ実行などの機能を提供します。</p>
                                </div>
                                <a href="job-change-controller.html" class="feature-list-link">→</a>
                            </div>

                            <div class="feature-list-item">
                                <div class="feature-list-icon">📊</div>
                                <div class="feature-list-content">
                                    <h3><a href="#growth-controller">GrowthController</a></h3>
                                    <p>経験値の獲得、レベルアップ、ステータス上昇など、基本的な成長システムを管理します。</p>
                                </div>
                            </div>
                        </div>

                        <h2 id="growth-controller" style="margin-top: 3rem;">GrowthController</h2>
                        
                        <h3>基本的な使い方</h3>
                        <p>GrowthControllerを使う基本的な例です：</p>
                        <pre><code>import { GEasyKit } from 'geasy-kit';

const game = new GEasyKit();

// 成長管理
const growthController = game.controllers.growth();

growthController.on('level-up', (data) => {
  console.log('レベルアップ:', data.character, data.newLevel);
  showLevelUpAnimation(data);
});

growthController.on('exp-gained', (data) => {
  console.log('経験値獲得:', data.exp);
  updateExpBar(data);
});</code></pre>

                        <h3>イベント一覧</h3>
                        <p><code>on()</code>メソッドで購読できるイベントです：</p>
                        
                        <table>
                        <table>
                            <thead>
                                <tr>
                                    <th>イベント名</th>
                                    <th>データ</th>
                                    <th>説明</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>exp-gained</td>
                                    <td>{ character, exp, totalExp }</td>
                                    <td>経験値を獲得したとき</td>
                                </tr>
                                <tr>
                                    <td>level-up</td>
                                    <td>{ character, oldLevel, newLevel, statGains }</td>
                                    <td>レベルアップしたとき</td>
                                </tr>
                                <tr>
                                    <td>stats-increased</td>
                                    <td>{ character, statGains }</td>
                                    <td>ステータスが上昇したとき</td>
                                </tr>
                            </tbody>
                        
                        <h3>成長フロー</h3>
                        <p>GrowthControllerは以下の流れでキャラクター成長を進行します：</p>
                        <div class="flow-diagram">
                            <div class="flow-step">
                                <div class="flow-node flow-start">経験値獲得<br/><code>gainExperience()</code></div>
                                <div class="flow-arrow">↓</div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-node flow-decision">レベルアップ判定<br/><code>canLevelUp()</code></div>
                                <div class="flow-branch">
                                    <div class="flow-arrow-branch">
                                        <span class="branch-label">可能</span>
                                        <div class="arrow-down">↓</div>
                                    </div>
                                    <div class="flow-arrow-branch">
                                        <span class="branch-label">不可</span>
                                        <div class="arrow-down">→終了</div>
                                    </div>
                                </div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-node">レベルアップ実行<br/><code>levelUp()</code></div>
                                <div class="flow-arrow">↓</div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-node">ステータス上昇</div>
                                <div class="flow-arrow">↓</div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-node">スキル習得判定</div>
                                <div class="flow-arrow">↓</div>
                            </div>
                            <div class="flow-step">
                                <div class="flow-node flow-end">成長完了</div>
                            </div>
                        </div>

                        <h3>フロー制御の関数</h3>
                        <p>成長の流れを変更するために以下の関数を使用できます：</p>
                        <ul>
                            <li><code>gainExperience(characterId, exp)</code> - 経験値を付与</li>
                            <li><code>levelUp(characterId)</code> - レベルアップを実行</li>
                            <li><code>canLevelUp(characterId)</code> - レベルアップ可能か判定</li>
                            <li><code>getExpToNextLevel(characterId)</code> - 次のレベルまでの経験値を取得</li>
                        </ul>

                        <h3>ステート構造</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>プロパティ</th>
                                    <th>型</th>
                                    <th>説明</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>characterId</td>
                                    <td>string</td>
                                    <td>対象キャラクターのID</td>
                                </tr>
                                <tr>
                                    <td>currentLevel</td>
                                    <td>number</td>
                                    <td>現在のレベル</td>
                                </tr>
                                <tr>
                                    <td>currentExp</td>
                                    <td>number</td>
                                    <td>現在の経験値</td>
                                </tr>
                                <tr>
                                    <td>expToNextLevel</td>
                                    <td>number</td>
                                    <td>次のレベルまでの必要経験値</td>
                                </tr>
                                <tr>
                                    <td>leveledUp</td>
                                    <td>boolean</td>
                                    <td>レベルアップしたかどうか</td>
                                </tr>
                                <tr>
                                    <td>statGains</td>
                                    <td>Stats | null</td>
                                    <td>レベルアップ時のステータス上昇値</td>
                                </tr>
                                <tr>
                                    <td>newSkills</td>
                                    <td>Skill[]</td>
                                    <td>習得したスキル一覧</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>メソッド一覧</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>メソッド</th>
                                    <th>引数</th>
                                    <th>戻り値</th>
                                    <th>説明</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>gainExperience</td>
                                    <td>characterId: string, exp: number</td>
                                    <td>Promise&lt;void&gt;</td>
                                    <td>経験値を付与する</td>
                                </tr>
                                <tr>
                                    <td>levelUp</td>
                                    <td>characterId: string</td>
                                    <td>Promise&lt;LevelUpResult&gt;</td>
                                    <td>レベルアップを実行する</td>
                                </tr>
                                <tr>
                                    <td>canLevelUp</td>
                                    <td>characterId: string</td>
                                    <td>boolean</td>
                                    <td>レベルアップ可能か判定する</td>
                                </tr>
                                <tr>
                                    <td>getState</td>
                                    <td>-</td>
                                    <td>GrowthState</td>
                                    <td>現在の成長状態を取得する</td>
                                </tr>
                                <tr>
                                    <td>subscribe</td>
                                    <td>listener: (state: GrowthState) =&gt; void</td>
                                    <td>() =&gt; void</td>
                                    <td>状態変更を購読する（解除関数を返す）</td>
                                </tr>
                                <tr>
                                    <td>on</td>
                                    <td>event: string, handler: (data: any) =&gt; void</td>
                                    <td>() =&gt; void</td>
                                    <td>イベントを購読する（解除関数を返す）</td>
                                </tr>
                            </tbody>
                        </table>

                        <h2>次のステップ</h2>
                        <div class="card">
                            <ul>
                                <li><a href="skill-learn-controller.html">SkillLearnController</a> - スキル習得の詳細</li>
                                <li><a href="job-change-controller.html">JobChangeController</a> - ジョブ変更の詳細</li>
                                <li><a href="battle.html">戦闘システム</a> - 経験値を獲得</li>
                                <li><a href="party.html">パーティ編成</a> - パーティメンバーの管理</li>
                                <li><a href="../customization/index.html">カスタマイズガイド</a> - 成長システムのカスタマイズ例</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 GEasy Kit. Licensed under ISC.</p>
            <p>
                <a href="https://github.com/yonyon-web/GEasy-Kit" target="_blank" rel="noopener">GitHub</a> |
                <a href="https://github.com/yonyon-web/GEasy-Kit/issues" target="_blank" rel="noopener">Issues</a> |
                <a href="index.html">Docs</a>
            </p>
        </div>
    </footer>

    <script>
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    document.querySelectorAll('.docs-sidebar a').forEach(a => a.classList.remove('active'));
                    this.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
