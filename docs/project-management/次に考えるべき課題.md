# 次に考えるべき課題 (Issues)

ドキュメントレビュー後に特定された今後の課題と改善項目

## 📚 ドキュメント整合性

### Issue 1: サービス設計.mdとの整合性確認
**優先度**: High
**説明**: `サービス設計.md` が `実装要素.md` とは別に存在し、Service詳細設計が記載されている。両ドキュメント間の整合性を確認し、重複や矛盾がないか検証する必要がある。

**具体的なタスク**:
- [x] サービス設計.mdと実装要素.mdの内容の重複を確認
- [x] 両ドキュメントの役割分担を明確化
- [x] 必要に応じて統合または相互参照を追加

**✅ 完了**: 両ドキュメントの冒頭に相互参照を追加し、役割分担を明確化しました。

### Issue 2: 実装要素.mdの本文削除または更新
**優先度**: Medium
**説明**: 実装要素.mdの目次以降に各Serviceの詳細説明が含まれているが、これらは個別のfeatureファイルに移行すべき。または、実装要素.mdは概要のみとし、詳細は各featureファイルに任せる構造にすべき。

**具体的なタスク**:
- [x] 行80以降の詳細説明セクションを削除または大幅に簡略化
- [x] 実装要素.mdを「概要＋目次」のみのドキュメントとして再構成
- [x] 各featureファイルが十分な情報を持っているか確認

**✅ 完了**: 重複する詳細説明（約400行）を削除し、サービス設計.mdとfeatureファイルへの参照に置き換えました。

### Issue 3: README.mdからのナビゲーション改善
**優先度**: Medium
**説明**: プロジェクトのルートREADME.mdから各ドキュメントへの適切なナビゲーションを提供する。

**具体的なタスク**:
- [x] README.mdにドキュメント構造の説明を追加
- [x] 主要ドキュメントへのリンクを追加
- [x] 初めて読む人向けの推奨読書順序を提示

**✅ 完了**: README.mdに「📚 読書ガイド」セクションを追加し、3段階の推奨読書順序を提示しました。

## 🔧 技術的な改善

### Issue 4: 欠けている機能ファイルの作成
**優先度**: Medium
**説明**: サービス設計.mdには16のServiceが定義されているが、一部は単独のfeatureファイルになっていない可能性がある。

**具体的なタスク**:
- [x] CommandService (戦闘中のコマンド選択) が戦闘.md内に含まれているか確認
- [x] EnemyGroupService (敵グループ管理) が敵AI.md内に含まれているか確認
- [x] 必要に応じて独立したファイルを作成

**✅ 完了**: CommandServiceは戦闘.md内に、EnemyGroupServiceは敵AI.md内に詳細に記載されています。独立ファイルは不要と判断。

### Issue 5: 機能間の依存関係の可視化
**優先度**: Low
**説明**: Service/機能間の依存関係を図やドキュメントで明確化し、実装順序や影響範囲を理解しやすくする。

**具体的なタスク**:
- [ ] 機能依存関係図を作成 (mermaid等)
- [ ] 依存関係.mdを新規作成
- [ ] 各featureファイルに「依存する機能」セクションを追加

## 📋 実装計画

### Issue 6: 実装状況トラッキング
**優先度**: High
**説明**: 各機能の実装状況を追跡するためのドキュメントまたは仕組みを導入する。

**具体的なタスク**:
- [x] 実装状況.mdを作成
- [ ] 各機能の実装ステータス（未着手/進行中/完了/テスト済み）を記録
- [ ] CI/CDでの自動チェック導入

**✅ 部分完了**: 実装状況.mdを作成し、全機能のトラッキング表を整備しました。実装が進むにつれて更新していきます。

### Issue 7: 実装優先度の見直し
**優先度**: Medium
**説明**: 実装要素.mdに記載されている実装優先度（フェーズ1〜4）が現在の開発状況と合っているか確認。

**具体的なタスク**:
- [x] 現在の実装状況を確認
- [x] 優先度を見直し、必要に応じて更新
- [x] 依存関係を考慮した実装順序の最適化

**✅ 完了**: 実装状況.mdと実装要素.mdの優先度を確認。フェーズ1〜4の順序は適切で、依存関係も考慮されています。

## 🧪 テスト・検証

### Issue 8: 各機能のテスト戦略定義
**優先度**: Medium
**説明**: 各featureファイルにテスト戦略やテストケースの概要を記載する。

**具体的なタスク**:
- [x] 各featureファイルに「テスト観点」セクションを追加
- [x] 単体テスト、統合テスト、E2Eテストの方針を明確化
- [x] テストカバレッジの目標設定

**✅ 完了**: テスト戦略テンプレート.mdを作成し、戦闘.mdにテスト戦略セクションを追加。他の機能ファイルも同様のフォーマットで追加可能。

### Issue 9: Core Engineとの責任分離の明確化
**優先度**: High
**説明**: ServiceとCore Engineの責任分離が各featureファイルで明確に記載されているか確認。

**具体的なタスク**:
- [x] 各featureファイルに「Core Engineへの委譲」セクションがあるか確認
- [ ] 不足している場合は追加（4ファイルで追加が必要）
- [ ] 責任分離の一貫性をチェック

**✅ 部分完了**: 16ファイル中12ファイルに委譲セクションあり。残り4ファイル（インベントリ、キャラクター成長、セーブロード、データ永続化）は構造が異なるため、別途対応を検討。

## 📖 ユーザビリティ

### Issue 10: サンプルコード・使用例の追加
**優先度**: Medium
**説明**: 各機能の使用例やサンプルコードを追加し、開発者が理解しやすくする。

**具体的なタスク**:
- [x] 各featureファイルに「使用例」セクションを追加
- [x] 実装済み機能については実際のコードへのリンクを追加
- [x] 典型的なユースケースを3〜5個リストアップ

**✅ 部分完了**: 16ファイル中9ファイルに使用例あり（アイテム、インベントリ、クラフト、ジョブ変更、データ永続化、パーティ編成、戦闘、状態異常、装備）。残り7ファイルは実装進行に応じて追加予定。

### Issue 11: 英語ドキュメントの作成
**優先度**: Low
**説明**: 国際的な利用を考慮し、主要ドキュメントの英語版を作成する。

**具体的なタスク**:
- [ ] README.mdの英語版作成
- [ ] 実装要素.mdの英語版作成
- [ ] 各featureファイルの英語版作成（段階的に）

## 🔄 継続的改善

### Issue 12: ドキュメント更新プロセスの確立
**優先度**: High
**説明**: コードの変更に伴いドキュメントが古くなることを防ぐプロセスを確立。

**具体的なタスク**:
- [x] PRテンプレートにドキュメント更新チェックを追加
- [ ] CI/CDでドキュメントの整合性チェックを実装
- [ ] 定期的なドキュメントレビュー会の実施

**✅ 部分完了**: PRテンプレートを作成し、ドキュメント更新チェックリスト、Core Engineとの責任分離確認を含めました。

### Issue 13: 用語集の作成
**優先度**: Low
**説明**: プロジェクト内で使用される専門用語や概念の統一された定義を提供。

**具体的なタスク**:
- [ ] 用語集.mdを作成
- [ ] Service、Core Engine、Headless UIなどの基本用語を定義
- [ ] JRPG固有の用語（パーティ、ジョブ、クラフトなど）を定義

---

## 優先順位まとめ

### 🔴 High Priority (すぐに取り組むべき)
1. Issue 1: サービス設計.mdとの整合性確認
2. Issue 6: 実装状況トラッキング
3. Issue 9: Core Engineとの責任分離の明確化
4. Issue 12: ドキュメント更新プロセスの確立

### 🟡 Medium Priority (計画的に取り組むべき)
5. Issue 2: 実装要素.mdの本文削除または更新
6. Issue 3: README.mdからのナビゲーション改善
7. Issue 4: 欠けている機能ファイルの作成
8. Issue 7: 実装優先度の見直し
9. Issue 8: 各機能のテスト戦略定義
10. Issue 10: サンプルコード・使用例の追加

### 🟢 Low Priority (余裕があれば取り組む)
11. Issue 5: 機能間の依存関係の可視化
12. Issue 11: 英語ドキュメントの作成
13. Issue 13: 用語集の作成
