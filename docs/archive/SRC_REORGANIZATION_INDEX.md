# src配下の構成見直し - ドキュメントインデックス

このディレクトリには、rpg-coreライブラリのsrc配下の構成を見直すための提案ドキュメントがあります。

## 📖 読み方ガイド

### 🚀 初めての方（推奨順序）

1. **🎨 まず見る**: [ビジュアル図解](./SRC_REORGANIZATION_VISUAL.md)
   - 所要時間: 5-10分
   - Before/Afterの視覚的な比較
   - 図やマトリックスで構造を理解
   - 現状の問題点が一目で分かる

2. **📄 次に読む**: [要約版](./SRC_REORGANIZATION_SUMMARY.md)
   - 所要時間: 10-15分
   - 4つの提案の概要
   - 比較表で各提案を比較
   - 推奨案のポイント
   - FAQ

3. **📚 詳しく知りたい方**: [詳細版](./SRC_REORGANIZATION_PROPOSALS.md)
   - 所要時間: 30-40分
   - 各提案の完全な説明
   - 詳細なディレクトリ構造
   - 実装ステップの詳細
   - 移行時の注意事項

### 💼 意思決定者向け

以下の順序で読むことをお勧めします：

1. **要約版** → 全体像と推奨案を把握
2. **比較表** → 各提案の特徴を比較
3. **ビジュアル図解** → 構造の変化を視覚的に確認
4. **詳細版の推奨案部分** → 実装の詳細を確認

### 🛠️ 実装担当者向け

以下の順序で読むことをお勧めします：

1. **ビジュアル図解** → 変更内容を視覚的に理解
2. **詳細版** → 実装ステップを詳細に確認
3. **要約版のFAQ** → よくある質問を確認

---

## 📚 ドキュメント一覧

### 1. ビジュアル図解
**ファイル**: [SRC_REORGANIZATION_VISUAL.md](./SRC_REORGANIZATION_VISUAL.md)

**内容**:
- 現状（Before）の構造図
- 提案3（After）の構造図
- Before/Afterの視覚的比較
- 階層とドメインのマトリックス
- データフローの可視化
- インポートパスの変化例
- 各フェーズの影響範囲

**こんな時に読む**:
- 全体像を素早く把握したい
- 構造の変化を視覚的に理解したい
- チームメンバーに説明したい

**特徴**:
- 図やマトリックスが豊富
- 読みやすく、理解しやすい
- 短時間で全体像を把握できる

---

### 2. 要約版
**ファイル**: [SRC_REORGANIZATION_SUMMARY.md](./SRC_REORGANIZATION_SUMMARY.md)

**内容**:
- 現状の問題点（簡潔）
- 4つの提案の概要
- 比較表（星評価付き）
- 推奨案（提案3）のポイント
- 段階的移行プラン
- FAQ
- 次のアクション

**こんな時に読む**:
- 全提案をざっくり比較したい
- 推奨案の特徴を知りたい
- 移行にかかる時間を知りたい

**特徴**:
- コンパクトにまとまっている
- 比較表で判断しやすい
- FAQで疑問を解消

---

### 3. 詳細版
**ファイル**: [SRC_REORGANIZATION_PROPOSALS.md](./SRC_REORGANIZATION_PROPOSALS.md)

**内容**:
- 現状分析（詳細）
- 提案1: レイヤー優先構成（アーキテクチャ重視）
  - 完全なディレクトリ構造
  - メリット・デメリット
  - 推奨度と理由
- 提案2: ドメイン優先構成（機能重視）
  - 完全なディレクトリ構造
  - メリット・デメリット
  - 推奨度と理由
- 提案3: ハイブリッド構成（バランス重視）★推奨★
  - 完全なディレクトリ構造
  - メリット・デメリット
  - 推奨度と理由
  - 実装ステップ（4フェーズ）
- 提案4: 最小限の改善（保守的）
  - 完全なディレクトリ構造
  - メリット・デメリット
  - 推奨度と理由
- 比較表（詳細）
- 推奨案の選定理由
- 段階的移行プラン（詳細）
- 移行時の注意事項

**こんな時に読む**:
- 各提案の詳細を知りたい
- 実装方法を具体的に知りたい
- 移行計画を立てたい

**特徴**:
- 最も詳しい情報
- すべての提案を網羅
- 実装に必要な情報が揃っている

---

## 🎯 現状の問題点（要約）

```
❌ 14個のトップレベルディレクトリが平坦に配置
❌ アーキテクチャの3層構造が不明瞭
❌ services, types, controllers が肥大化
❌ どこに何があるか分かりにくい
```

---

## 🏆 推奨案（提案3: ハイブリッド構成）

### 構造
```
src/
├── core/          # Core Engine層
├── services/      # Service層
├── ui/            # Headless UI層
└── types/         # 型定義
```

### 特徴
- ✅ アーキテクチャの3層構造が明確
- ✅ 各層内でドメイン別に整理
- ✅ 段階的な移行が可能
- ✅ 既存コードへの影響が最小限
- ✅ 長期的な保守性が高い

### 移行時間
**合計**: 11-16時間（約2営業日）

---

## 📊 提案の比較（簡易版）

| 提案 | アーキテクチャ | ドメイン | 移行コスト | 保守性 | 総合 |
|------|---------------|---------|-----------|-------|------|
| 1. レイヤー優先 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| 2. ドメイン優先 | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |
| **3. ハイブリッド** | **⭐⭐⭐⭐** | **⭐⭐⭐⭐** | **⭐⭐⭐⭐** | **⭐⭐⭐⭐** | **⭐⭐⭐⭐⭐** |
| 4. 最小限 | ⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ |

---

## 💡 よくある質問（簡易版）

### Q: どのドキュメントから読めばいい？
**A**: まず「ビジュアル図解」を見て、次に「要約版」を読むことをお勧めします。

### Q: どの提案が良い？
**A**: 提案3（ハイブリッド構成）を推奨します。バランスが最も良いためです。

### Q: すぐに実装する必要がある？
**A**: いいえ。段階的に実施できるため、適切なタイミングで始められます。

### Q: どのくらい時間がかかる？
**A**: 合計11-16時間（約2営業日）です。4フェーズに分けて実施できます。

詳しくは各ドキュメントのFAQセクションを参照してください。

---

## 📝 次のステップ

1. ✅ ドキュメントを読む
   - [ ] ビジュアル図解を見る
   - [ ] 要約版を読む
   - [ ] （必要に応じて）詳細版を読む

2. ⏸️ 決定する
   - [ ] どの提案を採用するか
   - [ ] いつ実装するか
   - [ ] 誰が担当するか

3. ⏸️ 実装する
   - [ ] ブランチを作成
   - [ ] フェーズごとに実施
   - [ ] テストとレビュー

---

## 📞 サポート

質問や不明点がある場合は、以下をご確認ください：

1. **FAQ**: 各ドキュメントのFAQセクション
2. **詳細版**: 詳しい説明と注意事項
3. **ビジュアル図解**: 具体的な構造と例

---

**作成日**: 2026-01-14  
**ドキュメント数**: 3  
**総文字数**: 約50,000字  
**推奨所要時間**: 初回読書 25-65分（選択したドキュメントによる）

---

## 📂 ファイル構成

```
docs/
├── SRC_REORGANIZATION_INDEX.md          ← このファイル
├── SRC_REORGANIZATION_VISUAL.md         ← 🎨 ビジュアル図解
├── SRC_REORGANIZATION_SUMMARY.md        ← 📄 要約版
└── SRC_REORGANIZATION_PROPOSALS.md      ← 📚 詳細版
```
