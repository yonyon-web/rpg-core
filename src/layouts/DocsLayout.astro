---
import BaseLayout from './BaseLayout.astro';

interface Props {
  title: string;
  sidebarTitle?: string;
  sidebarLinks?: Array<{ href: string; text: string; active?: boolean }>;
  relatedLinks?: Array<{ href: string; text: string }>;
}

const { title, sidebarTitle = 'ドキュメント', sidebarLinks = [], relatedLinks = [] } = Astro.props;
---

<BaseLayout title={`${title} - GEasy Kit`}>
    <section class="docs-section">
        <div class="container">
            <div class="docs-layout">
                <aside class="docs-sidebar">
                    <h3>{sidebarTitle}</h3>
                    <ul>
                        {sidebarLinks.map(link => (
                            <li><a href={link.href} class={link.active ? 'active' : ''}>{link.text}</a></li>
                        ))}
                    </ul>
                    {relatedLinks.length > 0 && (
                        <>
                            <h4 style="margin-top: 2rem;">関連ページ</h4>
                            <ul>
                                {relatedLinks.map(link => (
                                    <li><a href={link.href}>{link.text}</a></li>
                                ))}
                            </ul>
                        </>
                    )}
                </aside>

                <div class="docs-content">
                    <slot />
                </div>
            </div>
        </div>
    </section>
</BaseLayout>

<script>
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                document.querySelectorAll('.docs-sidebar a').forEach(a => a.classList.remove('active'));
                this.classList.add('active');
            }
        });
    });
</script>
